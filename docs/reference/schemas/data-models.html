<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Data Models &amp; Schemas</title>
    <meta name="description" content="Data model documentation and type definitions">
    <!-- frontmatter
title: "Data Models &amp; Schemas"
description: "Data model documentation and type definitions"
category: "reference"
order: 4
-->
</head>
<body>
<h1>Data Models &amp; Schemas</h1>
<p>TypeScript types and Zod schemas used in the migration system.</p>
<h2>TypeScript Types</h2>
<h3>WooCommerce Types</h3>
<p>Located in <code>src/types/wc.ts</code></p>
<h4>WCProduct</h4>
<pre><code class="language-typescript">interface WCProduct {
  id: number;
  name: string;
  type: &#39;simple&#39; | &#39;variable&#39; | &#39;grouped&#39; | &#39;external&#39;;
  status: string;
  sku: string;
  price: string;
  regular_price: string;
  sale_price: string;
  categories: Array&lt;{ id: number; name: string }&gt;;
  images: Array&lt;{ src: string; alt: string }&gt;;
  attributes: WCProductAttribute[];
  variations: number[];
}
</code></pre>
<h4>WCCategory</h4>
<pre><code class="language-typescript">interface WCCategory {
  id: number;
  name: string;
  slug: string;
  parent: number;
  description: string;
  count: number;
}
</code></pre>
<h4>WCCustomer</h4>
<pre><code class="language-typescript">interface WCCustomer {
  id: number;
  email: string;
  first_name: string;
  last_name: string;
  username: string;
  billing: WCBillingAddress;
  shipping: WCShippingAddress;
}
</code></pre>
<h3>BigCommerce Types</h3>
<p>Located in <code>src/types/bc.ts</code></p>
<h4>BCProduct</h4>
<pre><code class="language-typescript">interface BCProduct {
  id?: number;
  name: string;
  type: &#39;physical&#39; | &#39;digital&#39;;
  weight: number;
  price: string;
  categories: number[];
  images: BCProductImage[];
  variants: BCVariant[];
  custom_fields?: BCCustomField[];
}
</code></pre>
<h4>BCCategory</h4>
<pre><code class="language-typescript">interface BCCategory {
  id?: number;
  name: string;
  parent_id: number;
  description?: string;
  is_visible: boolean;
  sort_order: number;
}
</code></pre>
<h4>BCCustomer</h4>
<pre><code class="language-typescript">interface BCCustomer {
  id?: number;
  email: string;
  first_name: string;
  last_name: string;
  phone?: string;
  company?: string;
  addresses?: BCAddress[];
}
</code></pre>
<h2>Zod Schemas</h2>
<p>Located in <code>src/schemas/</code></p>
<h3>Validation Schemas</h3>
<p>Zod schemas validate API responses and ensure type safety:</p>
<h4>WC Product Schema</h4>
<pre><code class="language-typescript">const WCProductSchema = z.object({
  id: z.number(),
  name: z.string(),
  type: z.enum([&#39;simple&#39;, &#39;variable&#39;, &#39;grouped&#39;, &#39;external&#39;]),
  status: z.string(),
  sku: z.string().optional(),
  price: z.string(),
  regular_price: z.string(),
  sale_price: z.string().optional(),
  categories: z.array(z.object({
    id: z.number(),
    name: z.string()
  })),
  images: z.array(z.object({
    src: z.string().url(),
    alt: z.string().optional()
  })),
  attributes: z.array(WCProductAttributeSchema),
  variations: z.array(z.number())
});
</code></pre>
<h4>BC Product Schema</h4>
<pre><code class="language-typescript">const BCProductSchema = z.object({
  id: z.number().optional(),
  name: z.string().min(1).max(255),
  type: z.enum([&#39;physical&#39;, &#39;digital&#39;]),
  weight: z.number().min(0),
  price: z.string().regex(/^\d+\.\d{2}$/),
  categories: z.array(z.number()),
  images: z.array(BCProductImageSchema),
  variants: z.array(BCVariantSchema).max(600),
  custom_fields: z.array(BCCustomFieldSchema).optional()
});
</code></pre>
<h2>Data Transformation</h2>
<h3>Transformers</h3>
<p>Located in <code>src/migration/transformers/</code></p>
<p>Transformers convert WooCommerce data format to BigCommerce format:</p>
<h4>Category Transformer</h4>
<pre><code class="language-typescript">function transformCategory(wcCategory: WCCategory): BCCategory {
  return {
    name: wcCategory.name,
    parent_id: wcCategory.parent || 0,
    description: wcCategory.description || &#39;&#39;,
    is_visible: true,
    sort_order: 0
  };
}
</code></pre>
<h4>Product Transformer</h4>
<pre><code class="language-typescript">function transformProduct(wcProduct: WCProduct): BCProduct {
  return {
    name: wcProduct.name,
    type: &#39;physical&#39;,
    weight: parseFloat(wcProduct.weight || &#39;0&#39;),
    price: wcProduct.price,
    categories: wcProduct.categories.map(c =&gt; c.id),
    images: transformImages(wcProduct.images),
    variants: transformVariants(wcProduct)
  };
}
</code></pre>
<h2>Migration State</h2>
<h3>State Tracker</h3>
<p>Located in <code>src/migration/state-tracker.ts</code></p>
<p>Tracks migration progress for delta syncs:</p>
<pre><code class="language-typescript">interface MigrationState {
  lastRun: string; // ISO timestamp
  categories: {
    migrated: number;
    skipped: number;
    failed: number;
  };
  products: {
    migrated: number;
    skipped: number;
    failed: number;
  };
  // ... other entities
}
</code></pre>
<h2>Related Documentation</h2>
<ul>
<li><a href="../../platform/architecture/DATA_MAPPING_AND_MIGRATION_READINESS.html">Data Mapping</a> - Field-by-field mapping</li>
<li><a href="../../platform/architecture/MIGRATION_ARCHITECTURE.html">Migration Architecture</a> - How data models are used</li>
<li><a href="../api/">API Reference</a> - API data formats</li>
</ul>

</body>
</html>